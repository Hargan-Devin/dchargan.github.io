<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Index</title>
        <meta name="description" content="Home Page">
        <link rel="stylesheet" href="styles/normalize.css">
        <link rel="stylesheet" href="styles/main.css">
        <link rel="stylesheet" href="styles/medium.css">
        <link rel="stylesheet" href="styles/large.css">
        <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
        <script src="scripts/currentdate.js"></script>
        <script src="scripts/hamburger.js"></script>
        
        <script>
            function openNav() {
                document.getElementById("mySidenav").style.width = "250px";
                document.getElementById("main").style.marginLeft = "250px";
                }
            function closeNav() {
                document.getElementById("mySidenav").style.width = "0";
                document.getElementById("main").style.marginLeft = "0";
                }
        </script>
    </head>
    
    <body class="Index">
        <header class="headBack">
            <img src="images/sunny.jpg" class="headerImg" width="300" height="273" alt="Nice sunny day!">
            <h1 class="heading">Storm Center</h1>
        </header>
        
        <div class="Center-body">
            <nav class="clearfix">
                <button onclick="toggleMenu()">&#9776;</button>
                <ul id="hamburger" class="hide">
                    <li><a href="index.html">Home</a></li> 
                    <li><a href="franklin.html">Franklin</a></li> 
                    <li><a href="">Greenville</a></li>
                    <li><a href="">Springfield</a></li>
                    <li><a href="storm-center.html">Storm Center</a></li> 
                    <li><a href="gallery-7.html">Gallery</a></li>
                </ul>
            </nav>

            <main>
    

                <script>
                    var header = document.querySelector('header');
                    var section = document.querySelector('section');
                    var requestURL = 'https://byui-cit230.github.io/weather/data/towndata.json'
                    var request = new XMLHttpRequest();
                    request.open('GET', requestURL);
                    request.responseType = 'json';
                    request.send();
                    request.onload = function() {
                        var superHeroes= request.response;
                        populateHeader(superHeroes);
                        showHeroes(superHeroes);
                    }
        
                    function populateHeader(jsonObj) {
                        var myH1 = document.createElement('h1');
                        myH1.textContent = jsonObj['squadName'];
                        header.appendChild(myH1);
        
                        var myPara = document.createElement('p');
                        myPara.textContent = 'Hometown' + jsonObj['homeTown'] + ' // Formed: ' + jsonObj['formed'];
                    }
        
                    function showHeroes(jsonObj) {
                        var heroes = jsonObj['members'];
      
                        for (var i = 0; i < heroes.length; i++) {
                            var myArticle = document.createElement('article');
                            var myH2 = document.createElement('h2');
                            var myPara1 = document.createElement('p');
                            var myPara2 = document.createElement('p');
                            var myPara3 = document.createElement('p');
                            var myList = document.createElement('ul');

                            myH2.textContent = heroes[i].name;
                            myPara1.textContent = 'Secret identity: ' + heroes[i].secretIdentity;
                            myPara2.textContent = 'Age: ' + heroes[i].age;
                            myPara3.textContent = 'Superpowers:';
        
                            var superPowers = heroes[i].powers;
                            for (var j = 0; j < superPowers.length; j++) {
                                var listItem = document.createElement('li');
                                listItem.textContent = superPowers[j];
                                myList.appendChild(listItem);
                            }

                            myArticle.appendChild(myH2);
                            myArticle.appendChild(myPara1);
                            myArticle.appendChild(myPara2);
                            myArticle.appendChild(myPara3);
                            myArticle.appendChild(myList);

                            section.appendChild(myArticle);
                        }
                    }
    
                </script>
  
            </main>
        </div>
        <footer>  
            <section class="contact">
                <p><b>How's the Weather?</b></p>
                <p>332 Main St. Franklin, MU 33234 (02)<br>
                    333-22-1132 HW@howstheweather.com<br></p>
                    <div id="currentDate">
                    <script type="text/javascript">
                        dateFunction()
                    </script>
                    </div>
            </section>
        </footer>
    </body>
</html>